name: $(Build.BuildId)
trigger: none
pr: none

pool:
  vmImage: 'windows-2019'

variables:
  RootReactPiecesDir: '$(System.DefaultWorkingDirectory)/libraries/streaming-e2e-tests/react-app'

steps:
  - script: npx create-react-app webchat-cache
    displayName: "create-react-app"
    workingDirectory: $(RootReactPiecesDir)
  
  - script: npm install botframework-webchat@4.9.2
    displayName: 'npm install botframework-webchat@4.9.2'
    workingDirectory: $(RootReactPiecesDir)/webchat-cache
  
  - task: PublishPipelineArtifact@1
    displayName: 'Publish Artifact: WebChatNodeModulesCache'
    inputs:
      targetPath: $(RootReactPiecesDir)/webchat-cache/node_modules