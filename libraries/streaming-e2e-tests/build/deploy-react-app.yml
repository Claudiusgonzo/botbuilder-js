steps:
  # - script: npm install
  #   workingDirectory: '$(System.DefaultWorkingDirectory)\libraries\streaming-e2e-tests\react-app\testReactApp'

  # - script: npm run build
  #   displayName: 'Build react-app'
  #   workingDirectory: '$(System.DefaultWorkingDirectory)\libraries\streaming-e2e-tests\react-app\testReactApp'
  - powershell: Get-ChildItem "$(System.DefaultWorkingDirectory)\libraries\streaming-e2e-tests\react-app\testReactApp"

  - powershell: |
      Write-Host "Comprssing projecting into react-app.zip"

      Compress-Archive "$(System.DefaultWorkingDirectory)\libraries\streaming-e2e-tests\react-app\testReactApp\build\*" "$(System.DefaultWorkingDirectory)\libraries\streaming-e2e-tests\react-app\testReactApp\react-app.zip" 
    displayName:

  # - script: az webapp deployment source config-zip --resource-group "$(ResourceGroup)" --name "$(ReactAppService)" --src "$(System.DefaultWorkingDirectory)\libraries\streaming-e2e-tests\react-app\testReactApp\react-app.zip"
  #   displayName: 'Deploy react-app'
  #   workingDirectory: '$(System.DefaultWorkingDirectory)\libraries\streaming-e2e-tests\react-app\testReactApp'
  
  - task: AzureCLI@1
    displayName: 'Deploy react-app'
    inputs:
      ConnectedServiceNameARM: 'Team-Vendors(68a2ddd6-f962-4cd2-8170-211d720473a4)'
      scriptType: ps
      scriptLocation: inlineScript
      inlineScript: az webapp deployment source config-zip --resource-group "$(ResourceGroup)" --name "$(ReactAppService)" --src "$(System.DefaultWorkingDirectory)\libraries\streaming-e2e-tests\react-app\testReactApp\react-app.zip"