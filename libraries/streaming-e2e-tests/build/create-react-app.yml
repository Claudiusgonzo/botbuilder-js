steps:
  - task: PowerShell@2
    displayName: 'Creating React App using npx create-react-app'
    inputs:
      targetType: 'filePath'
      filePath: $(System.DefaultWorkingDirectory)\libraries\streaming-e2e-tests\build\create-react-app-with-webchat.ps1
      arguments:
        -RootReactPiecesDir $(TargetProjectDir)

  - powershell: npx create-react-app react-app
    displayName: 'create-react-app'
    workingDirectory: $(TargetProjectDir)

  - powershell: npm install botframework-webchat
    displayName: 'npm install botframework-webchat'
    workingDirectory: $(TargetProjectDir)/react-app

  - powershell: Remove-Item src/App.js, src/index.js, public/index.html
    displayName: "delete files we're replacing with custom code in react app"
    workingDirectory: $(TargetProjectDir)/react-app

  - powershell: |
      copy ..\custom-app-code\App.js, ..\custom-app-code\index.js .\src\
      copy ..\custom-app-code\index.html .\public
    displayName: "copy custom files into react-app"
    workingDirectory: $(TargetProjectDir)/react-app
