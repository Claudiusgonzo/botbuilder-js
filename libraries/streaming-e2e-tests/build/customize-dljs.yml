jobs:
  - job: Customize_DLJS
    variables:
      TargetProjectDir: '$(System.DefaultWorkingDirectory)\libraries\streaming-e2e-tests\react-app\BotFramework-DirectLineJS'
      PackageName: 'botframework-streaming'
    steps:
      - script: git clone https://github.com/microsoft/BotFramework-DirectLineJS.git
        displayName: 'Clone DLJS repo'
        workingDirectory: '$(System.DefaultWorkingDirectory)\libraries\streaming-e2e-tests\react-app'

      - template: configure-to-bbjs-daily.yml

      - script: npm run build
        displayName: Build DLJS
        workingDirectory: $(TargetProjectDir)
      
      - script: npm pack .
        displayName: Pack DLJS into .tgz
        workingDirectory: $(TargetProjectDir)

      - script: ren botframework-directlinejs-*.tgz botframework-directlinejs.tgz
        displayName: Rename to DLJS tgz to predictable name
        workingDirectory: $(TargetProjectDir)